function openOptions(evt, tabName) {

  var i, tabcontent, tablinks;


  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";

  }

  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";

}


$(function() {
  document.getElementById("defaultopen").click();
  var lookup = {
    Temperatur: {'GB1': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-10-07'], 'y': [10, 10, 0, 10]}, 'GB2': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07', '2020-10-20'], 'y': [10, 10, 10, 10, 10, 0.5, 10]}, 'GB3': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-10-07', '2020-10-16', '2020-10-20'], 'y': [10, 10, 10, 10, 10, 10, 10]}, 'GB4': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07'], 'y': [10, 10, 10, 10, '<10', 10]}, 'GB5': {'x': ['2020-08-25', '2020-09-22', '2020-10-07', '2020-10-20', '2020-09-29'], 'y': [10, 10, 10, 10, 10]}},
    // nitratAQ: {
    //   'GB1': {'x': ['2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07', '2020-10-16', '2020-10-20'], 'y': [0.47, 0.39, 0.1, 0.1, 1.27, 0.1]},
    //   'GB2': {'x': ['2020-09-08', '2020-10-07', '2020-10-20'], 'y': [0.65, 0.68, 0.21]},
    //   'GB3': {'x': ['2020-09-08', '2020-09-15', '2020-10-16', '2020-10-20'], 'y': [1.5, 0.1, 0.095, 0.1]},
    //   'GB4': {'x': ['2020-09-08', '2020-09-15', '2020-09-22'], 'y': [0.36, 0.7, 0.1]},
    //   'GB5': {'x': ['2020-09-15'], 'y': [0.33]}},
    Nitrat: {
      'GB1': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-10-07'], 'y': [0.02, 0.02, 0.02, 0.02]},
      'GB2': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07', '2020-10-20'], 'y': [0.02, 0.02, 0.02, 0.02, 0.002, 0.02, 0.02]},
      'GB3': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-10-07', '2020-10-16', '2020-10-20'], 'y': [0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02]},
      'GB4': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-22', '2020-10-07'], 'y': [0.02, 0.02, 0.02, 0.02, 0.02]},
      'GB5': {'x': ['2020-08-25', '2020-09-22', '2020-10-07', '2020-10-20', '2020-09-29'], 'y': [0.02, 0.02, 0.02, 0.02, 0.02]}},
    // nitritAQ: {
    //   'GB1': {'x': ['2020-10-07'], 'y': [0.010]},
    //   'GB2': {'x': [], 'y': []},
    //   'GB3': {'x': [], 'y': []},
    //   'GB4': {'x': [], 'y': []},
    //   'GB5': {'x': [], 'y': []}},
    Nitrit: {
      'GB1': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-10-07'], 'y': [0.2, 0.2, 0.3, 0.05]},
      'GB2': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07', '2020-10-20'], 'y': [0.2, 0.2, 0.2, 0.2, 0.05, 0.2, 0.05]},
      'GB3': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-10-07', '2020-10-16', '2020-10-20'], 'y': [0.05, 0.1, 0.05, 0.2, 0.2, 0.2, 0.2]},
      'GB4': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-22'], 'y': [0.2, 0.1, 0.2, 0.2]},
      'GB5': {'x': ['2020-08-25', '2020-09-08', '2020-09-22','2020-09-29', '2020-10-20'], 'y': [0.02, 0.2, 0.05, 0.2, 0.2]}},
    // ammoniumAQ: {
    //   'GB1': {'x': ['2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07', '2020-10-16'], 'y': [0.738, 0.419, 0.281, 0.229, 0.145]},
    //   'GB2': {'x': ['2020-09-08', '2020-10-07', '2020-10-20'], 'y': [0.583, 0.203, 0.299]},
    //   'GB3': {'x': ['2020-09-08', '2020-09-15', '2020-10-16', '2020-10-20'], 'y': [0.51, 0.131, 0.1, 0.103]},
    //   'GB4': {'x': ['2020-09-08', '2020-09-22', '2020-10-07'], 'y': [0.123, 0.421, 0.2]},
    //   'GB5': {'x': ['2020-09-08', '2020-09-15', '2020-10-07'], 'y': [0.117, 0.165, 0.05]}},
    Ammonium: {
      'GB1': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-10-07'], 'y': [0.5, 0, 0, 0.5]},
      'GB2': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07', '2020-10-20'], 'y': [0.5, 0.5, 0, 3, 0.5, 0.5, 0]},
      'GB3': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-10-07', '2020-10-16', '2020-10-20'], 'y': [0, 0.1, 0.5, 0.5, 0.5, 0, 0.5]},
      'GB4': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-22'], 'y': [1.2, 0.1, 0.5, 0.5]},
      'GB5': {'x': ['2020-08-25', '2020-09-08', '2020-09-22', '2020-10-20', '2020-09-29'], 'y': [0.5, 0.5, 0, 0.5, 0.5]}},
    // phosphatAQ: {
    //   'GB1': {'x': ['2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07', '2020-10-16'], 'y': [1.403, 0.49, 1.196, 0.423, 1.09]},
    //   'GB2': {'x': ['2020-09-08', '2020-10-07', '2020-10-20'], 'y': [1.673, 1.125, 1.155]},
    //   'GB3': {'x': ['2020-09-08', '2020-09-15', '2020-10-16', '2020-10-20'], 'y': [1.179, 1.206, 1.202, 0.632]},
    //   'GB4': {'x': ['2020-09-08', '2020-09-22', '2020-10-07'], 'y': [1.206, 1.266, 0.5]},
    //   'GB5': {'x': ['2020-09-08', '2020-09-15', '2020-10-07'], 'y': [0.432, 0.96, 0.5]}},
    Phosphat : {
      'GB1': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-10-07'], 'y': [8.5, 7.5, 8.4, 7.7]},
      'GB2': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07', '2020-10-20'], 'y': [8.5, 8, 8, 8.5, 8.5, 8.5, 8.5]},
      'GB3': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-10-07', '2020-10-16', '2020-10-20'], 'y': [8, 8, 8, 8.5, 8.5, 8.5, 7.5]},
      'GB4': {'x': ['2020-08-25', '2020-09-01', '2020-09-08', '2020-09-15', '2020-09-22', '2020-10-07'], 'y': [8, 8, 7.5, 8.5, 8.5, 9]},
      'GB5': {'x': ['2020-08-25', '2020-09-08', '2020-09-22', '2020-10-07', '2020-10-20', '2020-09-29'], 'y': [8.5, 8.5, 8.5, 9, 7, 8]}}
  }

  function getData(meas, loc) {
    var trace = {
      x: lookup[meas][loc].x,
      y: lookup[meas][loc].y
    }
    return trace
  };

  var measurements = Object.keys(lookup);

  var firstMeasurement = lookup[measurements[0]];

  var locs = Object.keys(firstMeasurement);

  var traces = [];
  var i;
  for (i = 0; i < locs.length; i++) {
    var data = firstMeasurement[locs[i]];
    traces.push({
      name: locs[i],
      x: data.x.slice(),
      y: data.y.slice(),
      type: 'scatter'
    });
  }

  var frames = [];
  for (i = 0; i < measurements.length; i++) {
    frames.push({
      name: measurements[i],
      data: locs.map(function (loc) {
        return getData(measurements[i], loc);
      })
    });
  }

  var sliderSteps = [];
  for (i = 0; i < measurements.length; i++) {
    sliderSteps.push({
      label: measurements[i],
      method: 'animate',
      args: [[measurements[i]], {
        mode: 'immediate',
        frame: {redraw: false, duration: 500},
        transition: {duration: 500}
      }]
    });
  }

  var layout = {
    // xaxis: {
    //   range: ['2020-10-01', '2020-12-09']
    // },
    // yaxis: {
    //   range: [0, 6.5]
    // },
    showlegend: true,
    sliders: [{
      pad: {t: 30},
      y: 0.05,
      x: 0.05,
      len: 0.95,
      currentvalue: {
        xanchor: 'right',
        prefix: 'Messwert: ',
        font: {
          color: '#888',
          size: 25
        }
      },
      transition: {duration: 500},

      steps: sliderSteps
    }]
  };

  Plotly.newPlot('graph', {
    data: traces,
    layout: layout,
    frames: frames
  });
});
